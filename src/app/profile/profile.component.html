<div class="profile">
    <div style="width: 100%; clear: left; margin-bottom: 50px;">
        <div style="width: 100%; margin-bottom: 35px;">
            <div style="float: left">Informatii personale</div>
            <div class="editeazaInformatii grow" (click)="editeazaInformatii()"> Editează informatiile </div>
        </div>
        <div class="profile-picture-div float-left" (click)="modalPozaProfil()">
            <div *ngIf="!userDataService.userData.profilePicture" class="profile-pic-add">
                <div style="margin-top: 115px;"> Click here to add a profile picture </div>
            </div>
            <div *ngIf="userDataService.userData.profilePicture" class="profile-pic-add">
                <img style="margin-top: -1px;margin-left: -31px;width: 257px;height: 290px;" src="{{userDataService.userData.profilePicture}}">
            </div>
        </div>
        <div class="info-div">
            <div> <b>Nume utilizator: </b> {{userDataService.userData.username}} </div>
            <div> <b>Email: </b> {{userDataService.userData.email}} </div>
            <div> <b>Telefon: </b> {{userDataService.userData.telefon || "-"}} </div>
            <div> <b>Vârstă: </b> {{userDataService.userData.varsta || "-"}} </div>
            <div> <b>Oraş: </b> {{userDataService.userData.oras || "-"}} </div>
            <div> <b>Ocupație: </b> {{userDataService.userData.ocupatie || "-"}} </div>
        </div>
    </div>
    <div style="width: 100%; clear: right">
        <div style="width: 100%">
            <div style="float: left">Cartile mele</div>
            <div class="adaugaCarte grow" (click)="addBookOpen()"> Adaugă carte </div>
        </div>
        <carousel *ngIf="myBooks.length>4" [items]="myBooks"></carousel>
        <div *ngIf="myBooks.length<5" style="margin-left: 34px">
            <ng-container *ngFor="let item of myBooks">
                <catalogue-item [profile]="true" [item]="item" [category]="'myBooks'"></catalogue-item>
            </ng-container>
        </div>
    </div>

    <div style="clear: left;">
        <select #categorie id="inputState" class="form-control select-custom" (change)="selectCategorie(categorie.value)">
            <option value="4"> Carti solicitate de mine </option>
            <option value="5"> Schimburi propuse </option>
            <option value="6"> Schimburi in desfasurare </option>
            <option value="1" > Schimburi confirmate de mine </option>
            <option value="2"> Schimburi finalizate </option>
            <option value="3" >Schimburi raportate de mine</option>
        </select>
    </div>

    <div style="margin-top: 10px">
        <div *ngIf="_selectCategorie === 'selectChosen'" style="width: 100%; clear: both;">
            <carousel-one *ngIf="chosenByMe.length>4" [items]="chosenByMe"></carousel-one>
            <div *ngIf="chosenByMe.length<5" style="margin-left: 34px">
                <ng-container *ngFor="let item of chosenByMe">
                    <catalogue-item [profile]="true" [item]="item" [category]="'chosenByMe'"></catalogue-item>
                </ng-container>
            </div>
        </div>

        <div *ngIf="_selectCategorie === 'selectSolicitate'" style="width: 100%; clear: left;">
            <carousel-two *ngIf="solicitate.length>4" [items]="solicitate"></carousel-two>
            <div *ngIf="solicitate.length<5" style="margin-left: 34px">
                <ng-container *ngFor="let item of solicitate">
                    <catalogue-item [profile]="true" [item]="item" [category]="'solicitate'"></catalogue-item>
                </ng-container>
            </div>
        </div>

        <div *ngIf="_selectCategorie === 'selectAcceptate'" style="width: 100%; clear: left;">
            <carousel-custom *ngIf="acceptate.length>4" [items]="acceptate"></carousel-custom>
            <div *ngIf="acceptate.length<5" style="margin-left: 34px">
                <ng-container *ngFor="let items of acceptate">
                    <ng-container *ngIf="items[0] && items[1]">
                        <two-items-container [itemArray]="items" [category]="'acceptate'"></two-items-container>
                    </ng-container>
                </ng-container>
            </div>
        </div>

        <div *ngIf="_selectCategorie === 'selectConfirmate'" style="width: 100%; clear: left;">
            <carousel-confirmate *ngIf="confirmate_de_mine.length>4" [items]="confirmate_de_mine"></carousel-confirmate>
            <div *ngIf="confirmate_de_mine.length<5" style="margin-left: 34px">
                <ng-container *ngFor="let items of confirmate_de_mine">
                    <ng-container *ngIf="items[0] && items[1]">
                        <two-items-container [itemArray]="items"></two-items-container>
                    </ng-container>
                </ng-container>
            </div>
        </div>
        <div *ngIf="_selectCategorie === 'selectFinalizate'" style="width: 100%; clear: left;">
            <carousel-finalizate *ngIf="finalizate.length>4" [items]="finalizate"></carousel-finalizate>
            <div *ngIf="finalizate.length<5" style="margin-left: 34px">
                <ng-container *ngFor="let items of finalizate">
                    <ng-container *ngIf="items[0] && items[1]">
                        <two-items-container [itemArray]="items"></two-items-container>
                    </ng-container>
                </ng-container>
            </div>
        </div>
        <div *ngIf="_selectCategorie === 'selectRaportate'" style="width: 100%; clear: left;">
            <carousel-raportate *ngIf="raportate.length>4" [items]="raportate"></carousel-raportate>
            <div *ngIf="raportate.length<5" style="margin-left: 34px">
                <ng-container *ngFor="let items of raportate">
                    <ng-container *ngIf="items[0] && items[1]">
                        <two-items-container [itemArray]="items"></two-items-container>
                    </ng-container>
                </ng-container>
            </div>
        </div>
    </div>

    <div style="width: 100%; clear: left;">
        <div> Recomandari </div>
        <div style="margin-left: 34px">
            <ng-container *ngFor="let item of recomandate">
                <catalogue-item [profile]="true" [allowedActiune]="true"[item]="item" [category]="'recomandate'"></catalogue-item>
            </ng-container>
        </div>
    </div>

    <!--Modal pt raspuns-->
    <div class="modal fade" id="modalChosenSolicitate" tabindex="-1" role="dialog" aria-labelledby="modallabel1" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content" style="width: 767px;margin-left: -160px;margin-top: 108px;">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel2">
                        {{databaseService.modalChosenSolicitate.title}}
                    </h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body" style="overflow-y: scroll;height: 410px !important;">
                    <div *ngIf="databaseService.booksInModal.length >= 1">
                        {{databaseService.modalChosenSolicitate.body}}
                        <ng-container *ngFor="let item of databaseService.booksInModal">
                            <catalogue-item [useOthers]="true" [item]="item"></catalogue-item>
                        </ng-container>
                    </div>
                    <div *ngIf="databaseService.booksInModal.length == 0">
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal" style="margin-right: 27px;">Închide</button>
                    <div class="col-lg-7 col-md-7 col-xs-7"></div>
                    <button type="button" class="btn btn-primary" (click)="databaseService.anuleazaRefuzaChosenSolicitate(databaseService.modalChosenSolicitate.rightButton)"> {{databaseService.modalChosenSolicitate.rightButton}} </button>
                </div>
            </div>
        </div>
    </div>

    <!--Modal pt carte-->
    <div class="modal fade" id="modalAdaugaCarte" tabindex="-1" role="dialog" aria-labelledby="modallabeladauga" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content" style="width: 767px;margin-left: -150px;margin-top: 70px;">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabelAdauga">
                        Adaugă o carte
                    </h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body" style="height: 689px !important;">
                    <form>
                        <div class="form-group">
                            <label for="exampleInputEmail1">Titlul cărții</label>
                            <input #input1 type="text" class="form-control" id="exampleInputEmail1" placeholder="Introduceți titlul">
                        </div>
                        <div class="form-group">
                            <label for="exampleAutor">Autorul cărții</label>
                            <input #input7 type="text" class="form-control" id="exampleAutor" placeholder="Introduceți autorul">
                        </div>
                        <div class="form-group">
                            <label for="exampleInputPassword1">Poza cărtii</label> <br>
                            <div style="border: 1px solid #e0d6d6; padding: 4px; border-radius: 5px;">
                                <input type="button" id="loadFileXml" value="Alegeți o poză" (click)="input2.click();" placeholder="Alegeți o poză"/>
                                <span *ngIf="input2.value"> {{input2.value.split("\\").pop()}} </span>
                            </div>
                            <input #input2 type="file" class="form-control" id="exampleInputPassword1" placeholder="Alegeți o poză"
                                   (change)="uploadPoza($event)" style="display: none;">
                        </div>
                        <div class="form-group">
                            <label for="exampleGen">Genul cărții</label> <br>
                            <select #input5 id="exampleGen" style="padding: 7px 0;background: white; width: 100%;">
                                <option value="fictiune"> Fictiune </option>
                                <option value="istorie"> Istorie </option>
                                <option value="geogragie"> Geografie </option>
                                <option value="stiinte"> Stiinte </option>
                                <option value="enciclopedie"> Enciclopedii </option>
                                <option value="memorii si biografii"> Memorii si biografii </option>
                                <option value="psihologie si dezvoltare personala"> Psihologie si dezvoltare personala </option>
                                <option value="culinare"> Culinare </option>
                                <option value="pentru copii"> Carti pentru copii </option>
                                <option value="altele"> Altele </option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="exampleLanguage">Limba</label> <br>
                            <select #input4 id="exampleLanguage" style="padding: 7px 0;background: white; width: 100%;">
                                <option value="engleza"> Engleza </option>
                                <option value="romana"> Romana </option>
                                <option value="altele"> Altele </option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="exampleStare">Starea cartii</label> <br>
                            <select #input8 id="exampleStare" style="padding: 7px 0;background: white; width: 100%;">
                                <option value="foartebuna"> Foarte buna </option>
                                <option value="buna"> Buna </option>
                                <option value="uzata"> Uzata </option>
                                <option value="foarteuzata"> Foarte uzata </option>
                            </select>
                        </div>
                        <button [disabled]="!input1.value || !input2.value || !input7.value" type="submit" class="btn btn-primary pull-right" (click)="submitBook(input1.value, input5.value, input4.value, input8.value, input7.value)">Adaugă</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!--Poza-->
    <div class="modal fade" id="modalprofil" tabindex="-1" role="dialog" aria-labelledby="modalprofil" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content" style="width: 767px;margin-left: -150px;margin-top: 200px;">
                <div class="modal-body" style="height: 180px">
                    <form>
                        <div class="form-group">
                            <label for="pozaa">Alege fotografia</label> <br>
                            <div style="border: 1px solid #e0d6d6; padding: 4px; border-radius: 5px;">
                                <input type="button" id="pozaaa" value="Alegeti o poza" (click)="input3.click();" placeholder="Alegeti o poza"/>
                                <span *ngIf="input3.value"> {{input3.value.split("\\").pop()}} </span>
                            </div>
                            <input #input3 type="file" class="form-control" id="pozaa" placeholder="Alegeti o poza"
                                   (change)="uploadProfilePhoto($event)" style="display: none;">
                        </div>

                        <button [disabled]="!input3.value" type="submit" class="btn btn-primary pull-right" (click)="submitPhoto()">Utilizeaza fotografia</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!--Modal pt informatii-->
    <div class="modal fade" id="modalInfo" tabindex="-1" role="dialog" aria-labelledby="modallabelinfo" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content" style="width: 767px;margin-left: -150px;margin-top: 180px;">
                <div class="modal-header">
                    <h5 class="modal-title" id="modallabelinfo">
                        Editeaza informatiile
                    </h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body" style="height: 400px !important;padding: 10px !important;">
                    <form>
                        <div class="form-group">
                            <label for="numeutilizator" class="col-lg-3 fl-editeaza">Nume utilizator</label>
                            <input #name type="text" class="form-control col-lg-8 fc-editeaza" id="numeutilizator" [value]="userDataService.userData.username" placeholder="Introduceți numele">
                        </div>
                        <div class="form-group">
                            <label for="telefon" class="col-lg-3 fl-editeaza">Telefon</label>
                            <input #phone type="text" class="form-control col-lg-8 fc-editeaza" id="telefon" [value]="userDataService.userData.telefon ? userDataService.userData.telefon : null" placeholder="Introduceți numarul de telefon">
                        </div>
                        <div class="form-group">
                            <label for="varsta" class="col-lg-3 fl-editeaza">Varsta</label>
                            <input #age type="text" class="form-control col-lg-8 fc-editeaza" id="varsta" [value]="userDataService.userData.varsta ? userDataService.userData.varsta : null" placeholder="Introduceti varsta">
                        </div>
                        <div class="form-group">
                            <label for="oras" class="col-lg-3 fl-editeaza">Oras</label>
                            <input #town type="text" class="form-control col-lg-8 fc-editeaza" id="oras" [value]="userDataService.userData.oras ? userDataService.userData.oras : null" placeholder="Introduceți orasul">
                        </div>
                        <div class="form-group">
                            <label for="ocupatie" class="col-lg-3 fl-editeaza">Ocupatie</label>
                            <input #ocupation type="text" class="form-control col-lg-8 fc-editeaza" id="ocupatie" [value]="userDataService.userData.ocupatie ? userDataService.userData.ocupatie : null" placeholder="Introduceți ocupatia">
                        </div>
                        <button [disabled]="!name.value" type="submit" class="btn btn-primary pull-right" (click)="changeInfo(name.value, phone.value, age.value, town.value, ocupation.value)">Modifica</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>


<!--Modal pt editat cartea-->
<div class="modal fade" id="modalEditeazaCarte" tabindex="-1" role="dialog" aria-labelledby="modallabelediteaza" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content" style="width: 767px;margin-left: -150px;margin-top: 70px;">
            <div class="modal-header">
                <h5 class="modal-title" id="examplemodallabelediteaza">
                    Editează cartea
                </h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body" style="height: 689px !important;">
                <form>
                    <div class="form-group">
                        <label for="exampleInputEmail1">Titlul cărții</label>
                        <input #inputEditeaza1 type="text" class="form-control" id="exampleInputEmail2" placeholder="Introduceți titlul" [value]="databaseService.editMyBook.titlu">
                    </div>
                    <div class="form-group">
                        <label for="exampleAutore">Autorul cărții</label>
                        <input #input70 type="text" class="form-control" id="exampleAutore" [value]="databaseService.editMyBook.autor" placeholder="Introduceți autorul">
                    </div>
                    <div class="form-group">
                        <label for="exampleInputPassword1">Poza cărtii</label> <br>
                        <div style="border: 1px solid #e0d6d6; padding: 4px; border-radius: 5px;">
                            <input type="button" id="loadFileXml1" value="Alegeți o poză" (click)="inputEditeaza2.click();" placeholder="Alegeți o poză"/>
                            <span *ngIf="inputEditeaza2.value"> {{inputEditeaza2.value.split("\\").pop()}} </span>
                            <span *ngIf="!inputEditeaza2.value"> Poza curentă </span>
                        </div>
                        <input #inputEditeaza2 type="file" class="form-control" id="exampleInputPassword2" placeholder="Alegeți o altă poză"
                               (change)="uploadPoza($event)" style="display: none;">
                    </div>
                    <div class="form-group">
                        <label for="exampleGene">Genul cărții</label> <br>
                        <select #input50 id="exampleGene" [value]="databaseService.editMyBook.gen" style="padding: 7px 0;background: white; width: 100%;">
                            <option value="fictiune"> Fictiune </option>
                            <option value="istorie"> Istorie </option>
                            <option value="geografie"> Geografie </option>
                            <option value="stiinte"> Stiinte </option>
                            <option value="enciclopedie"> Enciclopedie </option>
                            <option value="memorii si biografii"> Memorii si biografii </option>
                            <option value="psihologie si dezvoltare personala"> Psihologie si dezvoltare personala </option>
                            <option value="culinare"> Culinare </option>
                            <option value="pentru copii"> Pentru copii </option>
                            <option value="altele"> Altele </option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="exampleLanguagee">Limba</label>
                        <input #input40 type="text" class="form-control" id="exampleLanguagee" [value]="databaseService.editMyBook.limba" placeholder="Introduceți limba">
                    </div>
                    <div class="form-group">
                        <label for="exampleStaree">Starea cartii</label> <br>
                        <select #input80 id="exampleStaree" [value]="databaseService.editMyBook.stareCarte" style="padding: 7px 0;background: white; width: 100%;">
                            <option value="foartebuna"> Foarte buna </option>
                            <option value="buna"> Buna </option>
                            <option value="uzata"> Uzata </option>
                            <option value="foarteuzata"> Foarte uzata </option>
                        </select>
                    </div>
                    <button [disabled]="!inputEditeaza1.value || !input70.value" type="submit" class="btn btn-primary pull-right" (click)="editMyBook(inputEditeaza1.value, input50.value, input40.value, input80.value, input70.value)">Finalizează</button>
                </form>
            </div>
        </div>
    </div>
</div>

<!--modal stergere-->
<div class="modal fade" style="margin-top: 225px;" id="modalSterge" tabindex="-1" role="dialog" aria-labelledby="examplemodalstergelabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content bg-custom-grey">
            <div class="modal-header">
                <h5 class="modal-title" id="examplemodalstergelabel">Șterge cartea</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                Ești sigur(ă) că dorești să ștergi această carte?
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal" style="margin-right: 14.8rem; padding:9px;">Anulează</button>
                <div class="col-xs-7"></div>
                <button type="button" class="btn btn-primary" style="padding: .5rem .72rem" (click)="databaseService.removeMyBook()">Da</button>
            </div>
        </div>
    </div>
</div>

<!--Modal detalii carti-->
<div class="modal fade" id="modalDetalii" tabindex="-1" role="dialog" aria-labelledby="modalDetalii" aria-hidden="true" >
    <div class="modal-dialog" role="document">
        <div class="modal-content" style="width: 767px;margin-left: -160px;margin-top: 180px; height:400px;">
            <div *ngIf="databaseService.itemModalDetalii" class="row" style="padding: 14px 20px;">
                <div class="col-lg-5">
                    <img class="item-img" src="{{databaseService.itemModalDetalii.poza}}"> <br>
                </div>
                <div class="col-lg-7">
                    <div>
                        <span> <b>Titlu: </b> {{databaseService.itemModalDetalii.titlu}} </span> <br>
                        <span> <b>Utilizator: </b> {{databaseService.itemModalDetalii.proprietarCurent}} </span> <br>
                        <span> <b>Autor: </b> {{databaseService.itemModalDetalii.autor}} </span> <br>
                        <span> <b>Starea cartii: </b> {{databaseService.itemModalDetalii.stareCarte || "-"}} </span> <br>
                        <span> <b>Gen: </b> {{databaseService.itemModalDetalii.gen || "-"}} </span> <br>
                        <span> <b>Limba: </b> {{databaseService.itemModalDetalii.limba || "-"}} </span> <br>
                        <span> <b> Book tracking: </b> </span> <span (click)="openAici()" > Click </span>
                    </div>
                    <div *ngIf="databaseService.itemModalDetalii.proprietarCurent !== userDataService.userData.email" class="custom-div" data-toggle="modal" data-target="#modal2" (click)="tradeBook()"> Trade </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!--Modal pt o carte din pagina de carti-->
<div class="modal" id="modal2" tabindex="-1" role="dialog" aria-labelledby="modallabel2" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content" style="width: 767px;margin-left: -160px;margin-top: 108px;">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel3">
                    Alege cartile pe care ai dori sa le oferi la schimb
                </h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body" style="overflow-y: scroll;height: 410px !important;">
                <div class="inside" *ngIf="myBooks.filter(available).length >= 1">
                    <ng-container *ngFor="let item of myBooks.filter(available)">
                        <catalogue-item [useOthers] = "true" [squareSelector]="true" [item]="item" [alege_catalog]="true" [allowedActiune]="false"></catalogue-item>
                    </ng-container>
                </div>
                <div *ngIf="myBooks.length == 0">
                    Schimbul nu poate fi realizat deocamdata, deoarece nu exista carti disponibile.
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal" style="margin-right: 25px;">Close</button>
                <div class="col-lg-7 col-md-7 col-xs-7"></div>
                <button [disabled] = "!this.databaseService.tradeBooksForChosenBooks.length" type="button" class="btn btn-primary" (click)="databaseService.addChosenBookAndTradeBooks()">Trimite oferta </button>
            </div>
        </div>
    </div>
</div>