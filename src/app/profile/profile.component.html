<div class="profile">
    <div style="width: 100%; clear: left; margin-bottom: 50px;">
        <div style="width: 100%; margin-bottom: 35px;">
            <div>Informatii personale</div>
        </div>
        <div class="profile-picture-div float-left" (click)="modalPozaProfil()">
            <div *ngIf="!userDataService.userData.profilePicture" class="profile-pic-add">
                <div style="margin-top: 115px;"> Click here to add a profile picture </div>
            </div>
            <div *ngIf="userDataService.userData.profilePicture" class="profile-pic-add">
                <img style="margin-top: -1px;margin-left: -31px;width: 257px;height: 289px;" src="{{userDataService.userData.profilePicture}}">
            </div>
        </div>
        <div class="info-div">
            <div> <b>Nume utilizator: </b> {{userDataService.userData.username}} </div>
            <div> <b>Email: </b> {{userDataService.userData.email}} </div>
            <div> <b>Telefon: </b> {{userDataService.userData.phone || "-"}} </div>
            <div> <b>Vârstă: </b> {{userDataService.userData.age || "-"}} </div>
            <div> <b>Oraş: </b> {{userDataService.userData.city || "-"}} </div>
            <div> <b>Ocupație: </b> {{userDataService.userData.ocupation || "-"}} </div>
        </div>
    </div>
    <div style="width: 100%; clear: right">
        <div style="width: 100%">
            <div style="float: left">Cartile mele</div>
            <div class="adaugaCarte grow" (click)="addBookOpen()"> Adauga carte </div>
        </div>
        <carousel *ngIf="myBooks.length>4" [items]="myBooks"></carousel>
        <div *ngIf="myBooks.length<5" style="margin-left: 34px">
        <ng-container *ngFor="let item of myBooks">
            <catalogue-item [profile]="true" [item]="item"></catalogue-item>
        </ng-container>
        </div>
    </div>
    <div style="width: 100%; clear: left;">
        <div style="width: 100%" class="titlu_sectiune">Carti solicitate de mine</div>
        <carousel *ngIf="chosenByMe.length>4" [items]="chosenByMe"></carousel>
        <div *ngIf="chosenByMe.length<5" style="margin-left: 34px">
            <ng-container *ngFor="let item of chosenByMe">
                <catalogue-item [profile]="true" [item]="item"></catalogue-item>
            </ng-container>
        </div>
    </div>
    <div style="width: 100%; clear: left;">
        <div style="width: 100%" class="titlu_sectiune">Schimburi propuse</div>
        <carousel *ngIf="solicitate.length>4" [items]="solicitate"></carousel>
        <div *ngIf="solicitate.length<5" style="margin-left: 34px">
            <ng-container *ngFor="let item of solicitate">
                <catalogue-item [profile]="true" [item]="item"></catalogue-item>
            </ng-container>
        </div>
    </div>
    <div style="width: 100%; clear: left;">
        <div style="width: 100% !important;" class="titlu_sectiune">Schimburi in desfasurate</div>
        <ng-container *ngFor="let items of acceptate">
            <ng-container *ngIf="items[0] && items[1]">
                <two-items-container [itemArray]="items"></two-items-container>
            </ng-container>
        </ng-container>
    </div>
</div>

<!--Modal pt raspuns-->
<div class="modal fade" id="modal1" tabindex="-1" role="dialog" aria-labelledby="modallabel1" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content" style="width: 767px;margin-left: -160px;margin-top: 108px;">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel2">
                    <!--Schimba cartea-->
                    {{databaseService.modal1.title}}
                </h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body" style="overflow-y: scroll;height: 410px !important;">
                <div *ngIf="databaseService.booksInModal.length >= 1">
                    <!--Daca esti de acord sa schimbi aceasta carte, alege cartea pe care o vrei pentru ea: <br>-->
                    {{databaseService.modal1.body}}
                    <ng-container *ngFor="let item of databaseService.booksInModal">
                        <catalogue-item [useOthers]="true" [item]="item"></catalogue-item>
                    </ng-container>
                </div>
                <div *ngIf="databaseService.booksInModal.length == 0">
                    <!--Schimbul nu poate fi realizat deocamdata, deoarece nu exista carti disponibile.-->
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal" style="margin-right: 27px;">Close</button>
                <div class="col-lg-7 col-md-7 col-xs-7"></div>
                <button type="button" class="btn btn-primary" (click)="databaseService.refuza(databaseService.modal1.rightButton)"> {{databaseService.modal1.rightButton}} </button>
            </div>
        </div>
    </div>
</div>

<!--Modal pt carte-->
<div class="modal fade" id="modalAdaugaCarte" tabindex="-1" role="dialog" aria-labelledby="modallabeladauga" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content" style="width: 767px;margin-left: -150px;margin-top: 200px;">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabelAdauga">
                    Adauga o carte
                </h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body" style="overflow-y: scroll;height: 300px !important;">
                <form>
                    <div class="form-group">
                        <label for="exampleInputEmail1">Titlul cartii</label>
                        <input #input1 type="text" class="form-control" id="exampleInputEmail1" placeholder="Introduceti titlul">
                    </div>
                    <div class="form-group">
                        <label for="exampleInputPassword1">Poza cartii</label> <br>
                        <div style="border: 1px solid #e0d6d6; padding: 4px; border-radius: 5px;">
                            <input type="button" id="loadFileXml" value="Alegeti o poza" (click)="input2.click();" placeholder="Alegeti o poza"/>
                            <span *ngIf="input2.value"> {{input2.value.split("\\").pop()}} </span>
                        </div>
                        <input #input2 type="file" class="form-control" id="exampleInputPassword1" placeholder="Alegeti o poza"
                               (change)="uploadPoza($event)" style="display: none;">
                    </div>
                    <button [disabled]="!input1.value || !input2.value" type="submit" class="btn btn-primary pull-right" (click)="submitBook(input1.value)">Adauga</button>
                </form>
            </div>
        </div>
    </div>
</div>

<!--Poza-->
<div class="modal fade" id="modalprofil" tabindex="-1" role="dialog" aria-labelledby="modalprofil" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content" style="width: 767px;margin-left: -150px;margin-top: 200px;">
            <div class="modal-body" style="height: 180px">
                <form>
                    <div class="form-group">
                        <label for="pozaa">Alege fotografia</label> <br>
                        <div style="border: 1px solid #e0d6d6; padding: 4px; border-radius: 5px;">
                            <input type="button" id="pozaaa" value="Alegeti o poza" (click)="input3.click();" placeholder="Alegeti o poza"/>
                            <span *ngIf="input3.value"> {{input3.value.split("\\").pop()}} </span>
                        </div>
                        <input #input3 type="file" class="form-control" id="pozaa" placeholder="Alegeti o poza"
                               (change)="uploadProfilePhoto($event)" style="display: none;">
                    </div>
                    <button [disabled]="!input3.value" type="submit" class="btn btn-primary pull-right" (click)="submitPhoto()">Utilizeaza fotografia</button>
                </form>
            </div>
        </div>
    </div>
</div>